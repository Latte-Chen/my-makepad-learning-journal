makepad_draw::shader::draw_icon Live DSL
"DrawIcon ={{dummy}}{color :#fff uniform u_brightness :float uniform u_curve :float texture tex :texture2d varying pos :vec2 ,varying tex_coord1 :vec2 varying clipped :vec2 fn clip_and_transform_vertex(self ,rect_pos :vec2 ,rect_size :vec2) ->vec4{let clipped :vec2 =clamp(self .geom_pos *rect_size +rect_pos ,self .draw_clip .xy ,self .draw_clip .zw) self .pos =(clipped -rect_pos)/rect_size self .tex_coord1 =mix(self .icon_t1 .xy ,self .icon_t2 .xy ,self .pos .xy) return self .camera_projection *(self .camera_view *(self .view_transform *vec4(clipped .x ,clipped .y ,self .draw_depth +self .draw_zbias ,1.)))} fn vertex(self) ->vec4{return self .clip_and_transform_vertex(self .rect_pos ,self .rect_size)} fn get_color(self) ->vec4{return self .color ;} fn pixel(self) ->vec4{let dx =dFdx(vec2(self .tex_coord1 .x *2048.0 ,0.)) .x ;let dp =1.0 /2048.0 ;let s =sample2d_rt(self .tex ,self .tex_coord1 .xy) .x ;s =pow(s ,self .u_curve) ;let col =self .get_color() ;return vec4(s *col .rgb *self .u_brightness *col .a ,s *col .a) ;}}"